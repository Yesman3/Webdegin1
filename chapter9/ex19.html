<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>insert page title</title>
    <link rel="stylesheet" href="css/nameList.css">
</head>
<body>

    <div id="container">
        <h1>ì°¸ê°€ ì‹ ì²­</h1>


        <div>
            <input type="text" id="username" placeholder="ì´ë¦„">
            <button type="button" onclick="newRegister()">ì‹ ì²­</button>
        </div>

        <hr>
        <div id="nameList"></div>
    </div>
    <script>
        // ì‹ ì²­ ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ
        // ì°¸ê°€ìì˜ ì´ë¦„ì´ ì…ë ¥ë˜ì–´ìˆì§€ ì•Šë‹¤ë©´
        // alertë“±ìœ¼ë¡œ "ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”!" ë¥¼ ì¶œë ¥

        function newRegister(){
       


            var userNameTag = document.querySelector("#username"); 
            var userName = userNameTag.value;

            if(userName == ""){
                alert("ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”");
            } else{
                var up = document.createElement("span");
                var down = document.createElement("span");
                var remove = document.createElement("span");

                var upText = document.createTextNode("ğŸ”º");
                var downText = document.createTextNode("ğŸ”»");
                var removeText = document.createTextNode("âŒ");

                // createAttribute() -> ì†ì„±ì„ ë§Œë“œëŠ” ë©”ì„œë“œ
                // var upAttr = document.createAttribute("class");
                // var downAttr = document.createAttribute

                // setAttribute() ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©´ íƒœê·¸ì— ì†ì„±ì„ ì‰½ê²Œ ì¶”ê°€í•  ìˆ˜ ìˆìŒ
                up.setAttribute("class", "btn");
                down.setAttribute("class", "btn");
                remove.setAttribute("class","btn");

                // íƒœê·¸ë¥¼ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ì¶”ê°€í•  ë–„ íƒœê·¸ì˜ ì´ë²¤íŠ¸ ì²˜ë¦¬ê¸°ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì‰½ê²Œ
                // ë“±ë¡í•  ìˆ˜ ìˆìŒ / onclick ë“±ê³¼ ê°™ì€ ì´ë²¤íŠ¸ ì²˜ë¦¬ê¸°ë„ ê²°êµ­ì—ëŠ” ì†ì„±ì´ë‹¤.
                // up.setAttribute("onclick", "clickUp(this)");
                // down.setAttribute("onclick", "clickDown(this)");

                // addEventListener() ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì„œë„ íŠ¹ì •í•œ íƒœê·¸ì— ì´ë²¤íŠ¸ ì²˜ë¦¬ê¸°ë¥¼ ë“±ë¡í•  ìˆ˜ ìˆìŒ
                // ìš°ë¦¬ê°€ ì§€ê¸ˆ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•´ì„œ íƒœê·¸ë¥¼ ìƒˆë¡­ê²Œ ì¶”ê°€í•˜ê³  ìˆìœ¼ë¯€ë¡œ
                // ìœ„ì—ì„œ í•œ ë°©ì‹(setAttribute)ë¥¼ ì‚¬ìš©í•´ì„œ ì´ë²¤íŠ¸ ì²˜ë¦¬ê¸° ë“±ë¡ì€ ê¶Œì¥í•˜ì§€ ì•ŠìŒ
                up.addEventListener("click", function(){
                    clickUp(this);
                });

                down.addEventListener("click", function(){
                    clickDown(this);
                });

                remove.addEventListener("click", function(){
                    clickRemove(this);
                })
               

                up.appendChild(upText);
                down.appendChild(downText);
                remove.appendChild(removeText);


                // HTML êµ¬ì¡°ë¡œ ë³¸ë‹¤ë©´ <span> â–² </span>
                // HTML êµ¬ì¡°ë¡œ ë³¸ë‹¤ë©´ <span> â–¼ </span>
                up.appendChild(upText);
                down.appendChild(downText);
                remove.appendChild(removeText);

                var newP = document.createElement("p");

                var userNameTextNode = document.createTextNode(userName);

                newP.appendChild(userNameTextNode);
                newP.appendChild(remove);
                newP.appendChild(up);
                newP.appendChild(down);
                

                var nameListTag = document.querySelector("#nameList");

                nameListTag.appendChild(newP);

                userNameTag.value = "";
            }
        }

        // ìœ„ë¡œ í™”ì‚´í‘œë¥¼ ëˆŒë €ì„ ë•Œ ë™ì‘í•˜ëŠ” í•¨ìˆ˜
        function clickUp(element){
            // element ë§¤ê°œë³€ìˆ˜ë¡œ í˜„ì¬ í´ë¦­í•œ span íƒœê·¸ê°€ ì „ë‹¬ë˜ë‹ˆê¹Œ ì´ë¥¼ í™œìš©í•´ì„œ
            // í˜„ì¬ í´ë¦­í•œ íƒœê·¸ì˜ ë¶€ëª¨ ë…¸ë“œë¡œ ì˜¬ë¼ê°€ë©´ píƒœê·¸ê°€ ë¨

            // span íƒœê·¸ì˜ ìœ„ì¹˜ë¥¼ ë°”ê¾¸ë ¤ëŠ”ê²Œ ì•„ë‹Œ ì´ë¦„ê³¼ ë‘ span íƒœê·¸ë¥¼ í¬í•¨í•˜ê³  ìˆëŠ” p íƒœê·¸ì˜ ìˆœì„œë¥¼ ë°”ê¾¸ë ¤ëŠ” ê²ƒ

            // parentNode ë©¤ë²„ ë³€ìˆ˜ -> í˜„ì¬ íƒœê·¸ì˜ ë¶€ëª¨ íƒœê·¸ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆìŒ
            // element ë©”ê²Œë³€ìˆ˜ê°€ span íƒœê·¸ë¥¼ ê°–ê³  ìˆìœ¼ë‹ˆ spaníƒœê·¸ì˜ ë¶€ëª¨ ë…¸ë“œì— ì ‘ê·¼í•˜ë©´ p íƒœê·¸ê°€ ë˜ê³ 
            // ê·¸ píƒœê·¸ë¥¼ pNode ë³€ìˆ˜ì— ì €ì¥

            let pNode = element.parentNode;

            // íƒœê·¸ë“¤ì˜ ìˆœì„œë¥¼ ë°”ê¾¸ë ¤ë©´ insertBefore ë©”ì„œë“œë¥¼ ì‚¬ìš©
            // ì´ë¯¸ ì¡´ì¬í•˜ëŠ” íƒœê·¸ë¥¼ insertBeforeì˜ ì¶”ê°€ ëŒ€ìƒ(ì²« ë²ˆì§¸ ì¸ì)ìœ¼ë¡œ ì§€ì •í•˜ë©´
            // íƒœê·¸ì˜ ìˆœì„œê°€ ë°”ë€œ

            // insertBefore ë©”ì„œë“œë¡œ íƒœê·¸ë¥¼ ìœ„ë¡œ ì˜¬ë¦¬ë ¤ë©´ ì²« ë²ˆì§¸ ì¸ìë¡œ ì´ë™í•˜ë ¤ëŠ” íƒœê·¸(ì§€ê¸ˆ upë²„íŠ¼ì„ ê¸€ë¦­í•œ íƒœê·¸)ë¥¼ ë„£ì–´ì£¼ê³ 
            // ë‘ ë²ˆì¨° ì¸ìëŠ” beforeì˜ ê¸°ì¤€ì´ ë˜ëŠ” ì´ë™í•˜ë ¤ëŠ” íƒœê·¸ì˜ ë°”ë¡œ ìœ„ì— ì´ëŠ” íƒœê·¸ë¥¼ ì§€ì •í•´ì•¼í•¨
            // ê·¸ë˜ì•¼ inser(ì¶”ê°€) í•˜ëŠ”ë° before(ì „)ì— ì¶”ê°€ë¨

            // ì´ë™í•˜ë ¤ëŠ” í˜„ì¬ íƒœê·¸ ë³´ë‹¤ ì•ì— ìˆëŠ” íƒœê·¸ë¥¼ ì°¾ê¸° ìœ„í•´
            // ì´ë™í•˜ë ¤ëŠ” í˜„ì¬ íƒœê·¸ì˜ ë¶€ëª¨ íƒœê·¸ë¡œ ì˜¬ë¼ê° (pNode.parentNodel)

            let nameListNode = pNode.parentNode;

            // ì•„ì´ë””ê°€ nameListì¸ íƒœê·¸ì˜ ìì‹ íƒœê·¸ë“¤ì— ì ‘ê·¼ ( nameListNode.children )
            let nameNodeList = nameListNode.children;

            let beforeIndex;
            for(let i = 0; i< nameNodeList.length; i++) {
                let nthNameNode = nameNodeList[i];

                if(nthNameNode == pNode){
                    beforeIndex = i - 1;
                    break;
            } 
        }
        
        if(beforeIndex != -1){
            nameListNode.insertBefore(pNode,nameNodeList[beforeIndex]);
        }
    }

       


        function clickDown(element){

            // 1. ì‹¤ì œ ì´ë™í•  íƒœê·¸

            let pNode = element.parentNode;
            
            // 2. ì´ë™í•  íƒœê·¸ì˜ ë¶€ëª¨ íƒœê·¸

            let nameListTag = pNode.parentNode;

            // 3. beforeì˜ ê¸°ì¤€ì´ ë˜ëŠ” ìì‹ íƒœê·¸
            // ë¶€ëª¨íƒœê·¸.insertBefore(ì´ë™í• íƒœê·¸, ê¸°ì¤€ì´ ë˜ëŠ” íƒœê·¸);
            let afterIndex;

            let nameNodeList = nameListTag.children;
            for(let i = 0; i <nameNodeList.length; i++){
                let nthNameNode = nameNodeList[i];

                if(nthNameNode == pNode){
                    afterIndex = i + 2;
                }
            }

            if(afterIndex <= nameNodeList.length){
            nameListTag.insertBefore(pNode, nameNodeList[afterIndex]);
            }
        }


        // x ì•„ì´ì½˜ì„ ëˆŒë €ì„ ë–„ ì‚­ì œ í•´ë¼

        function clickRemove(element){

            let pTag = element.parentNode;
            
            let nameListTag = pTag.parentNode;

            nameListTag.removeChild(pTag);
        }
        

    </script>


</body>
</html>

